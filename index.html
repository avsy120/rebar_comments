<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>תגובות שירות לקוחות</title>
  <style>
    body { margin:0; padding:0; font-family:Arial,sans-serif; background:#f5f5f5; color:#333; }
    .container { max-width:900px; margin:20px auto; padding:0 20px; }
    h1 { text-align:center; margin-bottom:20px; font-size:2em; }
    .search { width:100%; padding:10px; font-size:1em; border:1px solid #ccc; border-radius:4px; margin-bottom:30px; }
    .category { margin-top:40px; }
    .category h2 {
      font-size:1.4em; color:#0056b3;
      border-bottom:2px solid #0056b3; padding-bottom:5px; margin-bottom:15px;
    }
    .grid {
      display:grid;
      grid-template-columns:repeat(auto-fill,minmax(280px,1fr));
      gap:20px;
    }
    .card {
      background:#fff; padding:15px; border-radius:6px;
      box-shadow:0 2px 4px rgba(0,0,0,0.1);
      display:flex; flex-direction:column;
    }
    .card img {
      max-width:100%; border-radius:4px; margin-bottom:10px;
    }
    .copy-btn {
      background:#0056b3; color:#fff; border:none;
      padding:8px 12px; border-radius:4px; cursor:pointer;
      font-size:0.9em; margin-bottom:10px; transition:background .2s;
      align-self:flex-start;
    }
    .copy-btn:hover { background:#004494; }
    .copy-btn.copied { background:#28a745 !important; }
    .card p {
      margin:0; line-height:1.4; white-space:pre-wrap; flex:1;
    }
    @media(max-width:600px){ .grid{grid-template-columns:1fr;} }
  </style>
</head>
<body>
  <div class="container">
    <h1>תגובות שירות לקוחות</h1>
    <input id="search" class="search" placeholder="🔍 חפש תגובה..." oninput="filterResponses()"/>
    <div id="categories"></div>
  </div>

  <script>
    const categoriesData = {
      "חיובים כפולים": [
        { text: `המערכת מזהה באופן אוטומטי חיובים כפולים או שגויים ופועלת לביטולם. עם זאת, עדכון הנתונים עשוי להימשך מספר ימים.
במידה והחיובים ממשיכים להופיע בפירוט העסקאות, ניתן לפנות אלינו ואנו נדאג לזיכוי בהתאם 🙏` },
        { text: `שלום,
לאחר בדיקה, לא נמצא חיוב כפול. ייתכן שיידרש פרק זמן קצר עד שהחיוב יוסר באופן סופי. בשלב זה הוא חסום במערכות שלנו.
מומלץ לעקוב אחר פירוט העסקאות, ובמידה והחיוב לא ייעלם – ניתן לפנות אלינו בשנית, ונשמח לסייע.
תודה רבה 🙏` }
      ],
      "ארנק דיגיטלי": [
        { text: `אשמח לקבל את 4 הספרות האחרונות של אמצעי התשלום ששימש לביצוע ההזמנה, על מנת שנוכל לאתר אותה במערכת.
לתשומת לבך – במידה והתשלום בוצע באמצעות ארנק דיגיטלי כגון Google Pay או Apple Pay, ייתכן שהספרות האחרונות שונות מאלה שעל כרטיס האשראי.
תודה רבה 🙏` },
        { text: `במידה והתשלום בוצע באמצעות Apple Pay, ניתן למצוא את מספר הכרטיס הווירטואלי כך:
יש להיכנס לארנק הדיגיטלי (Wallet), ללחוץ על שלוש הנקודות בצד העליון של המסך, לבחור ב"מספר כרטיס" – ושם יוצג מספר הכרטיס המשויך לארנק הדיגיטלי.` },
        { text: `במידה והתשלום בוצע ב Google Pay: ועל מנת למצוא את 4 הספרות האחרונות של אמצעי התשלום
פתח את אפליקציית Google Pay
בחר בכרטיס שברצונך לבדוק.
לחץ על הסמל של שלוש הנקודות בצד העליון של המסך.
בחר ב"פרטי כרטיס" או "הצגת מספר כרטיס".
שם תוכל לראות את 4 הספרות האחרונות של כרטיסך.` }
      ],
      "קופון חיצוני": [
        { text: `היי מתנצלים על אי הנוחות לצערי אין לנו אפשרות לבדוק קופון שלא אנחנו נפקנו לכן יש לפנות לחברה ממנה רכשת את הקופון על מנת לברר את תקינותו 🙏` }
      ],
      "לוגו החברה": [
        { img: "https://via.placeholder.com/300x150?text=לוגו+החברה" }
      ]
      // המשיכו להוסיף כאן לפי הצורך...
    };

    async function copyImage(url, btn) {
      try {
        const data = await fetch(url);
        const blob = await data.blob();
        await navigator.clipboard.write([ new ClipboardItem({ [blob.type]: blob }) ]);
        btn.classList.add('copied'); btn.textContent = 'הועתק';
        setTimeout(() => { btn.classList.remove('copied'); btn.textContent = 'העתק תמונה'; }, 1000);
      } catch (e) {
        alert('לא הצלחנו להעתיק את התמונה'); console.error(e);
      }
    }

    function render() {
      const root = document.getElementById('categories');
      root.innerHTML = '';
      for (const [cat, items] of Object.entries(categoriesData)) {
        const sec = document.createElement('div');
        sec.className = 'category';
        sec.innerHTML = `<h2>${cat}</h2><div class="grid"></div>`;
        const grid = sec.querySelector('.grid');

        items.forEach(item => {
          const card = document.createElement('div');
          card.className = 'card';

          if (item.img) {
            const img = document.createElement('img');
            img.src = item.img;
            card.appendChild(img);
            const btnImg = document.createElement('button');
            btnImg.textContent = 'העתק תמונה';
            btnImg.onclick = () => copyImage(item.img, btnImg);
            card.appendChild(btnImg);
          }
          if (item.text) {
            const btnTxt = document.createElement('button');
            btnTxt.className = 'copy-btn';
            btnTxt.textContent = 'העתק טקסט';
            btnTxt.onclick = () => {
              navigator.clipboard.writeText(item.text);
              btnTxt.classList.add('copied');
              btnTxt.textContent = 'הועתק';
              setTimeout(() => { btnTxt.classList.remove('copied'); btnTxt.textContent = 'העתק טקסט'; }, 800);
            };
            card.appendChild(btnTxt);
            const p = document.createElement('p');
            p.innerHTML = item.text.replace(/\n/g,'<br/>');
            card.appendChild(p);
          }

          grid.appendChild(card);
        });

        root.appendChild(sec);
      }
    }

    function filterResponses() {
      const q = document.getElementById('search').value.toLowerCase();
      document.querySelectorAll('.card').forEach(c => {
        const txt = c.querySelector('p')?.innerText.toLowerCase() || '';
        c.style.display = txt.includes(q) ? '' : 'none';
      });
      document.querySelectorAll('.category').forEach(cat => {
        cat.style.display = cat.querySelector('.card:not([style*="display: none"])') ? '' : 'none';
      });
    }

    window.onload = render;
  </script>
</body>
</html>
